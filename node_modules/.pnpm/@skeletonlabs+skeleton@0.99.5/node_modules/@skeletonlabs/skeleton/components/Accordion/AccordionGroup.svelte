<script>import { onMount, setContext } from "svelte";
export let collapse = true;
export let hover = "bg-primary-hover-token";
export let spacing = "space-y-4";
export let padding = "px-4 py-2";
export let rounded = "rounded-token";
setContext("hover", hover);
setContext("spacing", spacing);
setContext("padding", padding);
setContext("rounded", rounded);
const cBase = "rounded-container-token";
let elemAccordian;
onMount(() => {
  if (collapse) {
    const details = Array.from(elemAccordian.querySelectorAll("details"));
    details.forEach((detail) => {
      detail.addEventListener("click", (e) => {
        const active = details.find((d) => d.open);
        if (!e.currentTarget.open && active)
          active.open = false;
      });
    });
  }
});
$:
  classesBase = `${cBase} ${spacing} ${$$props.class ?? ""}`;
</script>

<!-- @component The Accordion parent element. -->

<div bind:this={elemAccordian} class="accordion-group {classesBase}" data-testid="accordion-group">
	<slot />
</div>

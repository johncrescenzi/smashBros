<script>import { createEventDispatcher, setContext } from "svelte";
import { writable } from "svelte/store";
const dispatch = createEventDispatcher();
export let active = writable(0);
export let length = 0;
export let duration = 200;
export let rounded = "rounded-token";
export let clickNavigation = false;
export let color = "text-white";
export let background = "bg-secondary-500";
export let buttonClassesBack = "btn-icon variant-ghost-surface";
export let buttonClassesNext = "btn variant-filled-surface";
export let buttonClassesComplete = "btn variant-filled-primary";
export let buttonTextBack = "&uarr;";
export let buttonTextNext = "Next &darr;";
export let buttonTextComplete = "Complete";
let highestStepReached = writable(0);
active.subscribe((v) => {
  if (v > $highestStepReached)
    highestStepReached.set(v);
});
setContext("dispatch", dispatch);
setContext("active", active);
setContext("length", length);
setContext("rounded", rounded);
setContext("clickNavigation", clickNavigation);
setContext("highestStepReached", highestStepReached);
setContext("color", color);
setContext("background", background);
setContext("buttonClassesBack", buttonClassesBack);
setContext("buttonClassesNext", buttonClassesNext);
setContext("buttonClassesComplete", buttonClassesComplete);
setContext("buttonTextBack", buttonTextBack);
setContext("buttonTextNext", buttonTextNext);
setContext("buttonTextComplete", buttonTextComplete);
setContext("duration", duration);
$:
  classesStepper = `${$$props.class ?? ""}`;
</script>

<div class="stepper {classesStepper}" data-testid="stepper">
	<slot />
</div>
